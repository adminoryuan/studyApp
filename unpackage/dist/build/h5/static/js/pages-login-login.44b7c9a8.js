(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"27d8":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"login"},[n("v-uni-text",{staticStyle:{float:"left",width:"100%",margin:"10%","font-weight":"1000","font-size":"20px"}},[e._v("账号密码登录")]),n("van-form",{on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLogin.apply(void 0,arguments)}}},[n("van-field",{attrs:{name:"",label:"用户名",placeholder:"",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.userinfo.username,callback:function(t){e.$set(e.userinfo,"username",t)},expression:"userinfo.username"}}),n("van-field",{attrs:{type:"password",name:"",label:"密码",placeholder:"",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.userinfo.password,callback:function(t){e.$set(e.userinfo,"password",t)},expression:"userinfo.password"}}),n("van-field",{attrs:{name:"",label:"验证码",placeholder:"",rules:[{required:!0,message:"请填写验证码"}]},scopedSlots:e._u([{key:"button",fn:function(){return[n("v-uni-image",{staticClass:"captcha-image",attrs:{src:"data:image/png;base64,"+e.codeImg},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.refreshCaptcha.apply(void 0,arguments)}}})]},proxy:!0}]),model:{value:e.userinfo.code,callback:function(t){e.$set(e.userinfo,"code",t)},expression:"userinfo.code"}}),n("div",{staticStyle:{padding:"20px"}},[n("van-button",{attrs:{round:!0,block:!0,type:"info","native-type":"submit"}},[e._v("登录")])],1)],1)],1)],1)},i=[]},"47c0":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".page[data-v-141292c4]{width:100%;height:100%}.login[data-v-141292c4]{display:flex;flex-direction:column;padding-top:20%;align-items:center}.captcha-image[data-v-141292c4]{width:100px;height:40px}",""]),e.exports=t},"616e":function(e,t,n){"use strict";n.r(t);var a=n("e32a"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"6bc4":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.teacher=t.student=void 0;t.student=[{pagePath:"/pages/study/study",iconPath:"static/icon/Overview.png",selectedIconPath:"static/icon/Overview.png",text:"我的学情"},{pagePath:"/pages/square/square",iconPath:"static/icon/User Groups.png",selectedIconPath:"static/icon/User Groups.png",text:"广场"},{pagePath:"/pages/effect/effect",iconPath:"static/icon/Reports.png",selectedIconPath:"static/icon/Reports.png",text:"成效"},{pagePath:"/pages/myinfo/myinfo",iconPath:"static/icon/Profile.png",selectedIconPath:"static/icon/Profile.png",text:"我的"}];t.teacher=[{pagePath:"/pages/teacher/teacher",iconPath:"static/icon/Overview.png",selectedIconPath:"static/icon/Overview.png",text:"学情"},{pagePath:"/pages/square/square",iconPath:"static/icon/User Groups.png",selectedIconPath:"static/icon/User Groups.png",text:"广场"},{pagePath:"/pages/teacher/effect/effect",iconPath:"static/icon/Reports.png",selectedIconPath:"static/icon/Reports.png",text:"成效"},{pagePath:"/pages/myinfo/myinfo",iconPath:"static/icon/Profile.png",selectedIconPath:"static/icon/Profile.png",text:"我的"}]},"6c5a":function(e,t,n){"use strict";var a=n("9b4d"),i=n.n(a);i.a},"9b4d":function(e,t,n){var a=n("47c0");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("a5ac0d66",a,!0,{sourceMap:!1,shadowMode:!1})},e32a:function(e,t,n){"use strict";(function(e){n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("6bc4"),i={data:function(){return{userinfo:{username:"学生2",password:"123456",code:void 0,uuid:void 0,role:void 0},codeImg:void 0,showPicker:!1,roles:["教师","学生"]}},methods:{getCode:function(){var e=this;this.$request("/captchaImage").then((function(t){e.codeImg=t.img,e.userinfo.uuid=t.uuid})).catch((function(e){}))},refreshCaptcha:function(){this.getCode()},onConfirm:function(e){this.userinfo.role=e,this.showPicker=!1},handleLogin:function(){var t=this;this.userinfo.role;this.$request("/login","post",this.userinfo).then((function(n){uni.setStorageSync("token",n.token),t.$request("/getInfo").then((function(t){uni.setStorageSync("userInfo",t.user),uni.setStorageSync("roles",t.roles),uni.setStorageSync("permissions",t.permissions),uni.showToast({title:"登录成功"});var n=t.roles[0];e("log",n," at pages/login/login.vue:79"),"student"==n?(uni.setStorageSync("tabBarList",a.student),uni.navigateTo({url:"/pages/study/study"})):"teach"==n&&(e("log",a.teacher," at pages/login/login.vue:86"),uni.setStorageSync("tabBarList",a.teacher),uni.navigateTo({url:"/pages/teacher/teacher"}))}))})).catch((function(e){t.refreshCaptcha()}))}},onLoad:function(){this.getCode(),uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff",animation:{duration:0,timingFunc:"easeIn"}})}};t.default=i}).call(this,n("0de9")["log"])},fcbf:function(e,t,n){"use strict";n.r(t);var a=n("27d8"),i=n("616e");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("6c5a");var s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"141292c4",null,!1,a["a"],void 0);t["default"]=c.exports}}]);